var Yike=angular.module("Yike",["ngRoute","Ctrls","Dirs"]);Yike.config(["$routeProvider",function(t){t.when("/today",{templateUrl:"./views/today.html",controller:"TodayCtrl"}).when("/older",{templateUrl:"./views/older.html",controller:"OlderCtrl"}).when("/author",{templateUrl:"./views/author.html",controller:"AuthorCtrl"}).when("/category",{templateUrl:"./views/category.html",controller:"CategoryCtrl"}).when("/settings",{templateUrl:"./views/settings.html",controller:"SettingsCtrl"}).when("/content",{templateUrl:"./views/content.html",controller:"contentCtrl"}).otherwise({redirectTo:"/today"})}]),Yike.run(["$rootScope",function(t){t.collapsed=!1,t.loaded=!1,t.toggle=function(){t.collapsed=!t.collapsed;var e=document.querySelectorAll(".navs dd");if(t.collapsed)for(var o=0;o<e.length;o++)e[o].style.transform="translateX(0)",e[o].style.transitionDuration=.25*(o+1)+"s",e[o].style.transitionDelay="0.4s";else for(var l=e.length-1;l>=0;l--)e[l].style.transform="translateX(-100%)",e[l].style.transitionDuration=.25*(e.length-l)+"s",e[l].style.transitionDelay=""},t.con=function(){t.id=this.post.id,location.href="#!/content"}}]),angular.module("Ctrls",[]).controller("NavsCtrl",["$scope",function(t){t.navs=[{text:"今日一刻",icon:"icon-home",link:"#!/today"},{text:"往期内容",icon:"icon-file-empty",link:"#!/older"},{text:"热门作者",icon:"icon-pencil",link:"#!/author"},{text:"栏目浏览",icon:"icon-menu",link:"#!/category"},{text:"设置",icon:"icon-cog",link:"#!/settings"}]}]).controller("TodayCtrl",["$scope","$http","$rootScope",function(t,e,o){o.title="今日一刻",o.key=0,o.loaded=!1,e({url:"./api/today.php",method:"get"}).then(function(e){t.posts=e.data.posts,t.time=e.data.date,o.loaded=!0}),t.fn=function(){console.log(1)}}]).controller("OlderCtrl",["$scope","$http","$rootScope",function(t,e,o){o.title="往期内容",o.key=1,o.loaded=!1,e({url:"./api/older.php",method:"get"}).then(function(e){t.posts=e.data.posts,t.time=e.data.date,o.loaded=!0})}]).controller("AuthorCtrl",["$scope","$http","$rootScope",function(t,e,o){o.title="热门作者",o.key=2,o.loaded=!1,e({url:"./api/author.php",method:"get"}).then(function(l){e({url:"./api/author.php"}).then(function(e){t.rec=e.data.rec.authors,t.all=e.data.all.authors,o.loaded=!0})})}]).controller("CategoryCtrl",["$scope","$http","$rootScope",function(t,e,o){o.title="栏目浏览",o.key=3,o.loaded=!1,e({url:"./api/category.php",method:"get"}).then(function(e){t.columns=e.data.columns,o.loaded=!0})}]).controller("SettingsCtrl",["$scope","$http","$rootScope",function(t,e,o){o.loaded=!0,o.key=4}]).controller("contentCtrl",["$scope","$http","$rootScope",function(t,e,o){o.loaded=!1,o.title="一刻内容",o.key=0,e({url:"./api/content.php",params:{id:o.id}}).then(function(e){t.content=e.data.share_pic_url,t.date=e.data.author.name,o.loaded=!0})}]),angular.module("Dirs",[]).directive("yikeLoading",function(){return{restrict:"A",template:'<img ng-hide="loaded" class="loading" src="./public/images/loading.gif" alt="" />'}});